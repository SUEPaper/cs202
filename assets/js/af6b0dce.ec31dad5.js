"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[3806],{23005:(o,e,t)=>{t.r(e),t.d(e,{assets:()=>a,contentTitle:()=>r,default:()=>u,frontMatter:()=>s,metadata:()=>i,toc:()=>c});var d=t(85893),n=t(11151);const s={id:"backend-put-delete",sidebar_position:11},r="Web\u540e\u7aef\uff1aHTTP PUT \u548c DELETE \u8bf7\u6c42",i={id:"todo/backend-put-delete",title:"Web\u540e\u7aef\uff1aHTTP PUT \u548c DELETE \u8bf7\u6c42",description:"\u672c\u8bfe\u7a0b\u7f51\u7ad9\u5185\u5bb9\u8bf7\u4ed4\u7ec6\u9605\u8bfb\u540e\u518d\u8fdb\u884c\u5b9e\u64cd\u3002\u56e0\u672a\u4ed4\u7ec6\u9605\u8bfb\u5185\u5bb9\uff0c\u51fa\u73b0\u4efb\u4f55\u9519\u8bef\u540e\u679c\u81ea\u8d1f\uff08\u9003\uff5e\uff5e\uff5e\u9003\uff5e\uff5e\uff5e\u9003",source:"@site/docs/todo/backend_put.md",sourceDirName:"todo",slug:"/todo/backend-put-delete",permalink:"/cs202/todo/backend-put-delete",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/todo/backend_put.md",tags:[],version:"current",sidebarPosition:11,frontMatter:{id:"backend-put-delete",sidebar_position:11},sidebar:"todoSidebar",previous:{title:"Web\u540e\u7aef\uff1aTODO API\u7684\u6570\u636e\u5e93\u7248\u672c",permalink:"/cs202/todo/backend-demo-migration"},next:{title:"Web\u540e\u7aef\uff1aVS Code Debug FastAPI \u4ee3\u7801",permalink:"/cs202/todo/debug"}},a={},c=[];function p(o){const e={a:"a",admonition:"admonition",code:"code",h1:"h1",img:"img",p:"p",pre:"pre",strong:"strong",...(0,n.a)(),...o.components};return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(e.h1,{id:"web\u540e\u7aefhttp-put-\u548c-delete-\u8bf7\u6c42",children:"Web\u540e\u7aef\uff1aHTTP PUT \u548c DELETE \u8bf7\u6c42"}),"\n",(0,d.jsxs)(e.admonition,{type:"tip",children:[(0,d.jsx)(e.p,{children:"\u672c\u8bfe\u7a0b\u7f51\u7ad9\u5185\u5bb9\u8bf7\u4ed4\u7ec6\u9605\u8bfb\u540e\u518d\u8fdb\u884c\u5b9e\u64cd\u3002\u56e0\u672a\u4ed4\u7ec6\u9605\u8bfb\u5185\u5bb9\uff0c\u51fa\u73b0\u4efb\u4f55\u9519\u8bef\u540e\u679c\u81ea\u8d1f\uff08\u9003\uff5e\uff5e\uff5e\u9003\uff5e\uff5e\uff5e\u9003"}),(0,d.jsxs)(e.p,{children:["\u8bf7\u5207\u6362\u5230 ",(0,d.jsx)(e.code,{children:"backend_put_delete_start"})," \u5206\u652f\uff0c\u5f00\u59cb\u6b64\u6559\u7a0b\u4ee3\u7801\u7684\u7f16\u5199\u3002"]}),(0,d.jsx)(e.p,{children:(0,d.jsx)(e.strong,{children:"\u6240\u6709\u7684\u4ee3\u7801\u8bf7\u4e0d\u8981\u590d\u5236\u7c98\u8d34\uff0c\u8bf7\u624b\u6572\u6bcf\u4e00\u884c\u4ee3\u7801\u3002\u590d\u5236\u7c98\u8d34\u4e0d\u4f1a\u8ba9\u4f60\u52a8\u8111\u5b50\uff0c\u800c\u624b\u6572\u6bcf\u4e00\u4e2a\u884c\u4ee3\u7801\u4f1a\u8ba9\u4f60\u81ea\u7136\u800c\u7136\u5730\u53bb\u52a8\u8111\u5b50\u4f1a\u60f3\u6bcf\u4e00\u884c\u4ee3\u7801\u7684\u542b\u4e49\u548c\u539f\u7406"})})]}),"\n",(0,d.jsx)(e.p,{children:"\u524d\u9762\u6211\u4eec\u5df2\u7ecf\u5b9e\u73b0\u4e86 TODO \u7684\u83b7\u53d6\u548c\u589e\u52a0API\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u9700\u8981\u5b9e\u73b0 TODO \u7684\u4fee\u6539\u548c\u5220\u9664 API\u3002"}),"\n",(0,d.jsxs)(e.p,{children:["\u7528 VS Code \u6253\u5f00 ",(0,d.jsx)(e.code,{children:"api/todos.py"})," \u6587\u4ef6\uff0c\u5c06\u4ee3\u7801\u66f4\u6539\u6210\u5982\u4e0b\u4ee3\u7801\uff1a"]}),"\n",(0,d.jsx)(e.pre,{children:(0,d.jsx)(e.code,{className:"language-python",metastring:"showLineNumbers",children:'from fastapi import APIRouter, Depends, HTTPException\nfrom sqlalchemy.orm import Session\n\nfrom api import deps\nfrom crud import crud_todo\nfrom schemas import todo as schemas_todo\n\nrouter = APIRouter()\n\n@router.get("/todos", response_model=list[schemas_todo.TodoInDB])\ndef get_all_todos(\n    db: Session = Depends(deps.get_db)\n):\n    todos = crud_todo.get_all(db=db)\n    return todos\n\n@router.get("/todos/{todo_id}", response_model=schemas_todo.TodoInDB)\ndef get_todo_by_id( \n    todo_id: int,\n    db: Session = Depends(deps.get_db)\n):\n    todo = crud_todo.get_by_id(db=db, id=todo_id)\n    return todo\n    \n@router.post("/todos", response_model=schemas_todo.TodoInDB)\ndef create_todo(\n    todo_parmas: schemas_todo.TodoCreate,\n    db: Session = Depends(deps.get_db)\n): \n    todo = crud_todo.create(db=db, todo_params=todo_parmas)\n    return todo\n\n@router.put("/todos/{todo_id}", response_model=schemas_todo.TodoInDB)\ndef update_todo(\n    todo_id: int,\n    todo_params: schemas_todo.TodoCreate,\n    db: Session = Depends(deps.get_db)\n):\n    todo = crud_todo.get_by_id(db=db, id=todo_id)\n\n    if not todo:\n        raise HTTPException(status_code=404, detail="Todo not found")\n\n    todo = crud_todo.update(db=db, id=todo_id, todo_params=todo_params)\n    return todo\n\n\n@router.delete("/todos/{todo_id}", response_model=schemas_todo.TodoInDB)\ndef delete_todo(\n    todo_id: int,\n    db: Session = Depends(deps.get_db)\n):\n    todo = crud_todo.get_by_id(db=db, id=todo_id)\n\n    if not todo:\n        raise HTTPException(status_code=404, detail="Todo not found")\n    todo = crud_todo.remove(db=db, id=todo_id)\n\n    return todo\n'})}),"\n",(0,d.jsxs)(e.p,{children:["\u63a5\u4e0b\u6765\u662f\u6d4b\u8bd5\u9636\u6bb5\uff0c\u8bf7\u7528\u6d4f\u89c8\u5668\u6253\u5f00 ",(0,d.jsx)(e.a,{href:"http://localhost:8000/docs(%E6%89%93%E5%BC%80",children:"http://localhost:8000/docs(\u6253\u5f00"})," URL \u524d\u8bf7\u786e\u4fdd\u6211\u4eec\u7684FastAPI \u5e94\u7528\u662f\u8fd0\u884c\u8d77\u6765\u7684)\u5bf9\u66f4\u65b0todo\u548c\u5220\u9664todo API\u8fdb\u884c\u6d4b\u8bd5\u3002"]}),"\n",(0,d.jsx)(e.p,{children:(0,d.jsx)(e.img,{src:t(10654).Z+"",width:"1468",height:"472"})}),"\n",(0,d.jsx)(e.admonition,{type:"tip",children:(0,d.jsxs)(e.p,{children:["\u53ef\u4ee5\u5207\u6362 ",(0,d.jsx)(e.code,{children:"backend_put_delete_finished"})," \u5206\u652f\uff0c\u67e5\u770b\u6700\u7ec8\u6b63\u786e\u5b9e\u73b0\u7684\u4ee3\u7801\u3002"]})})]})}function u(o={}){const{wrapper:e}={...(0,n.a)(),...o.components};return e?(0,d.jsx)(e,{...o,children:(0,d.jsx)(p,{...o})}):p(o)}},10654:(o,e,t)=>{t.d(e,{Z:()=>d});const d=t.p+"assets/images/http_put_delete_01-661ecf8c12ac9c5df3fef85dba294ea6.png"},11151:(o,e,t)=>{t.d(e,{Z:()=>i,a:()=>r});var d=t(67294);const n={},s=d.createContext(n);function r(o){const e=d.useContext(s);return d.useMemo((function(){return"function"==typeof o?o(e):{...e,...o}}),[e,o])}function i(o){let e;return e=o.disableParentContext?"function"==typeof o.components?o.components(n):o.components||n:r(o.components),d.createElement(s.Provider,{value:e},o.children)}}}]);